$ ->
  $(".thing-description").blur ->
    field = $(this).data('thing-id')
    value = $(this).text()
    $.ajax({
      method: 'put'
      data: { thing: { description: value }}
      url: '<% Rails.application.routes.default_url_options[:host] %>/things/' + field
    })

  $(".thing-description").bind 'keydown', (e) ->
    if e.keyCode is 13
      e.preventDefault()

  $("#new-thing").blur ->
    element = $(this)
    if $(this).text()
      $.ajax({
        method: 'post'
        data: { thing: { description: element.text() }}
        url: '<% Rails.application.routes.default_url_options[:host] %>/things'
      }).done ->
        element.text('')

  $("#new-thing").bind 'keydown', (e) ->
    element = $(this)
    if e.keyCode is 13
      e.preventDefault()
      $.ajax({
        method: 'post'
        data: { thing: { description: element.text() }}
        url: '<% Rails.application.routes.default_url_options[:host] %>/things'
      }).done ->
        element.text('')
